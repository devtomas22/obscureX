Metadata-Version: 2.1
Name: obscurex-agent
Version: 3.0.0
Summary: Autonomous AI agent with self-directed decision-making, Binance integration, modular tools, memory management, and ML pipeline optimization
Home-page: https://github.com/devtomas22/obscureX
Author: 
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: ISC License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE

# ObscureX AI Agent

An autonomous, self-directed AI agent with modular tools for cryptocurrency analysis, ML pipeline optimization, and Binance data integration. **Now with full autonomous decision-making capabilities** - the agent makes intelligent decisions based on context and memory, optimizing ML pipelines without human intervention. **Requires Anthropic Claude AI** for code generation and autonomous decision-making.

## Features

### ğŸ¤– Autonomous Decision-Making

**Fully Autonomous Operation:**
- **AI makes all decisions** based on current context, memory, and execution results
- **One AI request per situation** with full context for intelligent decision-making
- **Memory-based learning** - Agent learns from past attempts and successes
- **Dynamic execution flow** - AI decides next actions based on available options
- **MSE-driven optimization** - Automatically adapts strategies based on performance trends

**4 Autonomy Tools:**
1. **Analyze Context** - AI analyzes current state and memory to decide best next action
2. **Get Execution Options** - Discover available execution paths and next possible actions
3. **Recommend Optimization Strategy** - AI-powered MSE trend analysis and strategy recommendations
4. **Execute Autonomous Decision** - Complete autonomous decision cycle with execution

### 20 Built-in Modular Tools

**Binance & Cryptocurrency:**
1. **Download Binance Price History** - Download historical price data from Binance API in CSV format
2. **Analyze Binance Data** - Statistical analysis including volatility, trends, and volume analysis
3. **Calculate Crypto Indicators** - Calculate technical indicators (RSI, MACD, Bollinger Bands, SMA, EMA) **using AI-generated Python code with caching**

**CSV & Technical Indicators:**
4. **List Technical Indicators** - List all technical indicators in a CSV file (Binance-aware)
5. **Add Technical Indicator** - Add a new technical indicator column to a CSV
6. **Remove Technical Indicator** - Remove a technical indicator from a CSV

**ML Pipeline Management:**
7. **Test ML Pipeline** - Execute a Python ML pipeline and return MSE value (optimized for Binance data)
8. **Generate ML Pipeline** - Create ML pipeline code using CatBoost and/or Neural Networks (**Requires AI** - no template fallback, Binance-optimized)
9. **List Python Modules** - List all installed Python packages
10. **Install Python Module** - Install a Python package using pip

**Memory Management:**
11. **Store Memory** - Store information in short-term memory (session-based)
12. **Retrieve Memory** - Retrieve information from short-term memory
13. **Search Memory** - Search through short-term memory
14. **Store Long-Term Memory** - Store information persistently across sessions
15. **Retrieve Long-Term Memory** - Retrieve information from long-term memory
16. **Search Long-Term Memory** - Search through long-term memory

**Autonomous Decision-Making:**
17. **Analyze Context** - Use AI to analyze current context and decide next action
18. **Get Execution Options** - Get available execution flow options based on current state
19. **Recommend Optimization Strategy** - AI-powered strategy recommendations based on MSE trends
20. **Execute Autonomous Decision** - Execute complete autonomous decision cycle

### Modular Architecture

Tools are organized in a modular directory structure:
- **`obscurex/tools/binance/`** - Binance API integration and data download
- **`obscurex/tools/analysis/`** - Cryptocurrency data analysis and technical indicators
- **`obscurex/tools/csv/`** - CSV file operations (all Binance CSV format aware)
- **`obscurex/tools/ml/`** - Machine learning pipeline management
- **`obscurex/tools/memory/`** - Short-term and long-term memory operations
- **`obscurex/tools/autonomy/`** - Autonomous decision-making and execution flow tools

### AI-First Approach

**All code generation now requires AI:**
- Technical indicator calculations use AI-generated Python code (cached in long-term memory)
- ML pipeline generation always uses AI (no template fallback)
- **Autonomous decision-making** uses AI to analyze context and determine next actions
- Python code is executed via subprocess for maximum flexibility
- Smart caching prevents redundant code generation

## Installation

### From Source

```bash
git clone https://github.com/devtomas22/obscureX.git
cd obscureX
pip install -r requirements.txt
```

### Using setup.py

```bash
git clone https://github.com/devtomas22/obscureX.git
cd obscureX
pip install -e .
```

## Setup

**Anthropic Claude API key is now required** for all code generation features:

```bash
export ANTHROPIC_API_KEY='your-api-key-here'
# or
export CLAUDE_API_KEY='your-api-key-here'
```

Get your key at: https://console.anthropic.com/

Or pass it when creating the agent:

```python
from obscurex import ObscureXAgent
agent = ObscureXAgent(api_key='your-api-key-here')
```

Without an API key, only basic tools like memory management, CSV operations (list/add/remove), and Python module management will work.

## Usage

### Command Line Interface

```bash
# List all available tools (20 tools including autonomy)
python3 -m obscurex.agent list-tools

# Run examples
python3 examples.py

# Run tests
python3 test_validation.py
```

### Programmatic Usage

#### Working with Binance Data

```python
import asyncio
from obscurex import ObscureXAgent

async def main():
    agent = ObscureXAgent()

    # 1. Download Binance price data
    await agent.execute_tool('downloadBinancePriceHistory', {
        'symbol': 'BTCUSDT',
        'interval': '1h',      # 1m, 5m, 15m, 1h, 4h, 1d, etc.
        'limit': 1000,         # Max 1000 per request
        'outputFile': 'binance_btcusdt_1h.csv'
    })

    # 2. Analyze the downloaded data
    analysis = await agent.execute_tool('analyzeBinanceData', {
        'filename': 'binance_btcusdt_1h.csv'
    })
    print('Price analysis:', analysis['result'])

    # 3. Calculate technical indicators
    await agent.execute_tool('calculateCryptoIndicators', {
        'filename': 'binance_btcusdt_1h.csv',
        'indicators': ['RSI', 'MACD', 'BB', 'SMA', 'EMA']
    })

    # 4. List all indicators in the CSV
    indicators = await agent.execute_tool('listTechnicalIndicators', {
        'filename': 'binance_btcusdt_1h.csv'
    })
    print('Technical indicators:', indicators['result'])

asyncio.run(main())
```

#### Basic Tool Execution

```python
import asyncio
from obscurex import ObscureXAgent

async def main():
    agent = ObscureXAgent()

    # Execute any tool
    result = await agent.execute_tool('listTechnicalIndicators', {
        'filename': 'data.csv'
    })
    print(result)

asyncio.run(main())
```

#### Using Autonomous Decision-Making Tools

```python
import asyncio
from obscurex import ObscureXAgent

async def main():
    agent = ObscureXAgent(api_key='your-google-api-key')

    # 1. Analyze context and get AI decision
    context_analysis = await agent.execute_tool('analyzeContext', {
        'currentState': {
            'phase': 'optimization',
            'iteration': 5,
            'mse': 0.15,
            'threshold': 0.1
        },
        'objective': 'Achieve MSE below 0.1 for cryptocurrency price prediction',
        'aiService': agent.ai_service
    })

    print('AI Decision:', context_analysis['result']['decision'])

    # 2. Get available execution options
    options = await agent.execute_tool('getExecutionOptions', {
        'currentPhase': 'optimization',
        'currentState': {'mse': 0.15, 'threshold': 0.1},
        'aiService': agent.ai_service
    })

    print('Available actions:', options['result']['options'])

    # 3. Get optimization strategy recommendation
    strategy = await agent.execute_tool('recommendOptimizationStrategy', {
        'mseHistory': [0.25, 0.22, 0.20, 0.18, 0.15],
        'currentMSE': 0.15,
        'targetMSE': 0.1,
        'iterationNumber': 5,
        'aiService': agent.ai_service
    })

    print('Recommended strategy:', strategy['result']['recommendation'])

asyncio.run(main())
```

#### Memory Management

```python
import asyncio
from obscurex import ObscureXAgent

async def main():
    agent = ObscureXAgent()

    # Store in short-term memory (session-based)
    await agent.execute_tool('storeMemory', {
        'key': 'experiment_1',
        'value': {'mse': 0.15, 'approach': 'CatBoost'},
        'metadata': {'type': 'experiment'}
    })

    # Store in long-term memory (persistent)
    await agent.execute_tool('storeLongTermMemory', {
        'key': 'best_model',
        'value': {'mse': 0.05, 'code': '...'},
        'metadata': {'domain': 'price_prediction'}
    })

    # Search memory
    results = await agent.execute_tool('searchMemory', {
        'query': 'experiment'
    })

    # Retrieve from long-term memory
    best = await agent.execute_tool('retrieveLongTermMemory', {
        'key': 'best_model'
    })

asyncio.run(main())
```

## Memory System

### Short-Term Memory
- Stored in `agent_memory.json`
- Session-based (current run)
- Tracks iterations, experiments, temporary data
- Automatically cleared between major runs

### Long-Term Memory
- Stored in `agent_longterm_memory.json`
- Persistent across sessions
- Tracks best models, successful approaches, learnings
- Keeps history of changes
- Used to resume optimization from previous best

## Tool Documentation

### Binance & Cryptocurrency Tools

#### 1. Download Binance Price History
```python
await agent.execute_tool('downloadBinancePriceHistory', {
    'symbol': 'BTCUSDT',           # Trading pair
    'interval': '1h',              # 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 12h, 1d, 3d, 1w, 1M
    'limit': 1000,                 # Number of candles (max 1000)
    'startTime': '2024-01-01',     # Optional: ISO date or timestamp
    'endTime': None,               # Optional: ISO date or timestamp
    'outputFile': 'binance_btcusdt_1h.csv'
})
# Downloads and saves data in Binance CSV format
```

#### 2. Analyze Binance Data
```python
analysis = await agent.execute_tool('analyzeBinanceData', {
    'filename': 'binance_btcusdt_1h.csv'
})
# Returns comprehensive analysis:
# - Price statistics (min, max, average, change %)
# - Volume analysis (total, average, min, max)
# - Volatility metrics (standard deviation, average return)
# - Trend identification (bullish/bearish/neutral)
# - Moving average comparisons (SMA20, SMA50)
```

#### 3. Calculate Crypto Technical Indicators
```python
await agent.execute_tool('calculateCryptoIndicators', {
    'filename': 'binance_btcusdt_1h.csv',
    'indicators': ['RSI', 'MACD', 'BB', 'SMA', 'EMA']
})
# Uses AI-generated Python code (cached for performance) to add technical indicators:
# - RSI (Relative Strength Index)
# - MACD (Moving Average Convergence Divergence)
# - BB (Bollinger Bands: upper, middle, lower)
# - SMA (Simple Moving Average)
# - EMA (Exponential Moving Average)
```

### CSV Tools (Binance-Aware)

#### 4. List Technical Indicators
```python
await agent.execute_tool('listTechnicalIndicators', {
    'filename': 'data.csv'
})
# Returns: ['SMA_20', 'RSI_14', 'MACD', 'BB_upper', 'BB_lower']
# Filters out standard Binance columns automatically
```

#### 5. Add Technical Indicator
```python
await agent.execute_tool('addTechnicalIndicator', {
    'filename': 'data.csv',
    'indicatorName': 'SMA_50'
})
```

#### 6. Remove Technical Indicator
```python
await agent.execute_tool('removeTechnicalIndicator', {
    'filename': 'data.csv',
    'indicatorName': 'SMA_50'
})
```

### ML Pipeline Tools (Binance-Optimized)

#### 7. Test ML Pipeline
```python
python_code = """
import pandas as pd
import numpy as np
from sklearn.metrics import mean_squared_error
from sklearn.model_selection import train_test_split

# Works with Binance CSV format
df = pd.read_csv('binance_btcusdt_1h.csv')
# ... your ML pipeline code
print(f'MSE: {mse}')
"""

await agent.execute_tool('testMLPipeline', {'pythonCode': python_code})
# Returns: {'success': True, 'mse': 0.01, 'output': '...'}
```

#### 8. Generate ML Pipeline (AI-Powered - Required)
```python
# Create new pipeline for Binance data (requires Anthropic Claude API key)
await agent.execute_tool('generateMLPipeline', {
    'existingCode': None,
    'prompt': 'Create a Binance price prediction pipeline using CatBoost with feature engineering'
})

# Optimize existing pipeline
await agent.execute_tool('generateMLPipeline', {
    'existingCode': existing_pipeline_code,
    'prompt': 'Add hyperparameter tuning and cross-validation for crypto data'
})
# AI always generates code - no template fallback
# Generated code automatically handles Binance CSV format
```

#### 9. List Python Modules
```python
await agent.execute_tool('listPythonModules', {})
# Returns: ['numpy', 'pandas', 'scikit-learn', 'catboost', ...]
```

#### 10. Install Python Module
```python
await agent.execute_tool('installPythonModule', {
    'moduleName': 'catboost'
})
```

### Memory Tools

#### 11-13. Short-Term Memory
```python
# Store
await agent.execute_tool('storeMemory', {
    'key': 'current_mse',
    'value': 0.15,
    'metadata': {'iteration': 5}
})

# Retrieve
await agent.execute_tool('retrieveMemory', {'key': 'current_mse'})

# Search
await agent.execute_tool('searchMemory', {'query': 'mse'})
```

#### 14-16. Long-Term Memory
```python
# Store
await agent.execute_tool('storeLongTermMemory', {
    'key': 'best_approach_2024',
    'value': {'technique': 'CatBoost', 'mse': 0.05},
    'metadata': {'year': 2024}
})

# Retrieve
await agent.execute_tool('retrieveLongTermMemory', { 
    'key': 'best_approach_2024' 
})

# Search
await agent.execute_tool('searchLongTermMemory', { 
    'query': 'CatBoost' 
})
```

### Autonomous Decision-Making Tools

#### 17. Analyze Context
```python
# AI analyzes current state and memory to decide next action
result = await agent.execute_tool('analyzeContext', {
    'currentState': {
        'phase': 'optimization',
        'iteration': 5,
        'mse': 0.15,
        'threshold': 0.1
    },
    'objective': 'Achieve MSE below 0.1 for cryptocurrency price prediction',
    'aiService': agent.ai_service
})

# Returns:
# {
#   'decision': {
#     'action': 'hyperparameter_tuning',
#     'reasoning': 'MSE is improving but needs further optimization',
#     'details': 'Apply GridSearchCV with cross-validation',
#     'confidence': 'High'
#   },
#   'contextUsed': {
#     'shortTermEntries': 10,
#     'longTermEntries': 5
#   }
# }
```

#### 18. Get Execution Options
```python
# Get available execution flow options for current phase
result = await agent.execute_tool('getExecutionOptions', {
    'currentPhase': 'optimization',
    'currentState': {'mse': 0.15, 'threshold': 0.1},
    'aiService': agent.ai_service
})

# Returns available actions for the current phase:
# {
#   'phase': 'optimization',
#   'options': [
#     {
#       'action': 'continue_optimization',
#       'description': 'Continue with current optimization strategy',
#       'tools': ['generateMLPipeline', 'testMLPipeline']
#     },
#     {
#       'action': 'hyperparameter_tuning',
#       'description': 'Apply hyperparameter tuning to current model',
#       'optimization': 'Add GridSearchCV or RandomizedSearchCV'
#     },
#     # ... more options
#   ],
#   'aiRecommendations': [
#     {'action': 'hyperparameter_tuning', 'priority': 1, 'reasoning': '...'}
#   ]
# }
```

#### 19. Recommend Optimization Strategy
```python
# Get AI-powered optimization strategy based on MSE trends
result = await agent.execute_tool('recommendOptimizationStrategy', {
    'mseHistory': [0.25, 0.22, 0.20, 0.18, 0.15],
    'currentMSE': 0.15,
    'targetMSE': 0.1,
    'iterationNumber': 5,
    'aiService': agent.ai_service
})

# Returns:
# {
#   'recommendation': {
#     'strategy': 'Hyperparameter tuning',
#     'technique': 'Apply GridSearchCV with 5-fold cross-validation',
#     'expectedImpact': 'Moderate to significant improvement expected',
#     'alternativeStrategy': 'Try ensemble methods if tuning fails',
#     'tryDifferentApproach': False
#   },
#   'trends': {
#     'trend': 'improving',
#     'improvement': True,
#     'stagnant': False,
#     'avgImprovement': 0.025
#   }
# }
```

#### 20. Execute Autonomous Decision
```python
# Execute a complete autonomous decision cycle
result = await agent.execute_tool('executeAutonomousDecision', {
    'currentState': {
        'phase': 'optimization',
        'iteration': 5,
        'mse': 0.15,
        'threshold': 0.1,
        'mseHistory': [0.25, 0.22, 0.20, 0.18, 0.15]
    },
    'objective': 'Optimize ML pipeline for cryptocurrency price prediction',
    'dataFile': 'binance_btcusdt_1h.csv',
    'aiService': agent.ai_service
})

# Executes:
# 1. Context analysis
# 2. Execution options discovery
# 3. Strategy recommendation (if in optimization phase)
# 4. Decision execution
# 5. Memory storage
# Returns execution result with next state
```

## Examples

### Quick Start with Binance Data

```python
import asyncio
from obscurex import ObscureXAgent

async def main():
    agent = ObscureXAgent()

    # Download Binance data
    await agent.execute_tool('downloadBinancePriceHistory', {
        'symbol': 'BTCUSDT',
        'interval': '1h',
        'limit': 500,
        'outputFile': 'btc_data.csv'
    })

    # Analyze it
    analysis = await agent.execute_tool('analyzeBinanceData', {
        'filename': 'btc_data.csv'
    })
    print('Volatility:', analysis['result']['volatility']['volatilityPercent'])
    print('Trend:', analysis['result']['trends']['shortTerm'])

    # Add indicators
    await agent.execute_tool('calculateCryptoIndicators', {
        'filename': 'btc_data.csv',
        'indicators': ['RSI', 'MACD', 'SMA']
    })

asyncio.run(main())
```

See `examples.py` for basic tool usage and `test_validation.py` for complete examples.

```bash
# Run examples
python3 examples.py

# Run tests
python3 test_validation.py
```

## Architecture

```
obscurex/
â”œâ”€â”€ __init__.py          # Package initialization
â”œâ”€â”€ agent.py             # Main agent class
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ ai_service.py    # Anthropic Claude integration
â””â”€â”€ tools/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ tool_loader.py   # Dynamic tool loader
    â”œâ”€â”€ memory/          # 6 memory tools
    â”œâ”€â”€ csv/             # 3 CSV tools
    â”œâ”€â”€ ml/              # 4 ML tools
    â”œâ”€â”€ binance/         # 1 Binance tool
    â”œâ”€â”€ analysis/        # 2 analysis tools
    â””â”€â”€ autonomy/        # 4 autonomy tools
```

## Requirements

- Python 3.8 or higher
- anthropic >= 0.72.0
- requests >= 2.31.0
- pandas >= 2.0.0
- numpy >= 1.24.0
- scikit-learn >= 1.3.0 (optional, for ML features)
- **Anthropic Claude API key (REQUIRED for code generation and autonomous features)**
- Internet connection (for Binance API data download)

## API Key

The agent **requires** an Anthropic Claude API key for AI-powered features. Get your key at: https://console.anthropic.com/

**Without an API key:**
- Technical indicator calculations will fail (requires AI)
- ML pipeline generation will fail (requires AI)
- **Autonomous decision-making will fail (requires AI)**
- Basic tools (memory, CSV list/add/remove, Python modules) will still work

## Features

- ğŸ¤– **FULLY AUTONOMOUS AGENT** - AI makes all decisions based on context and memory
- ğŸ§  **Context-aware decision-making** - One AI request per situation with full context
- ğŸ¯ **Execution flow control** - AI decides which tools to use and when
- ğŸ“Š **MSE-driven optimization** - Adaptive strategies based on performance trends
- ğŸ”„ **Memory-based learning** - Agent learns from past attempts and successes
- ğŸ› ï¸ **20 modular tools** - Organized in 6 categories
- ğŸ“ˆ **Self-optimization** - Automatically adjusts approach based on results
- âœ¨ **AI-first code generation** - All Python code now generated by AI
- ğŸ§  **Intelligent caching** - Technical indicator code cached in long-term memory
- âš¡ **Performance optimization** - Cached code reused across sessions
- ğŸš« **No template fallback** - ML pipeline generation requires AI (more reliable)
- ğŸ **Python execution** - All generated code runs via subprocess

## License

ISC License - See LICENSE file for details

## Contributing

This is a demonstration project showcasing AI agent architecture with orchestration and memory management.
